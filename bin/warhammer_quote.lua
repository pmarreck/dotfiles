-- This Lua file was automatically generated from warhammer_quote
-- Do not edit this file directly; modify the source file instead

local load_quotes
load_quotes = function()
	local quotes_file = tostring(os.getenv('HOME')) .. "/dotfiles/bin/data/warhammer_quotes.txt"
	local quotes = { }
	local file = io.open(quotes_file, "r")
	if not file then
		error("Could not open quotes file: " .. tostring(quotes_file))
	end
	for line in file:lines() do
		if line:match("^%s*$") == nil then
			table.insert(quotes, line)
		end
	end
	file:close()
	return quotes
end
local get_random_seed
get_random_seed = function()
	local urandom = io.open("/dev/urandom", "rb")
	if urandom then
		local bytes = urandom:read(4)
		urandom:close()
		local seed = 0
		for i = 1, #bytes do
			seed = seed * 256 + string.byte(bytes, i)
		end
		return seed
	else
		return os.time() + os.clock() * 1000000
	end
end
math.randomseed(get_random_seed())
local warhammer_quote
warhammer_quote = function()
	local quotes = load_quotes()
	local random_index = math.random(1, #quotes)
	local selected_quote = quotes[random_index]
	return print(tostring(selected_quote) .. "!")
end
if not pcall(debug.getlocal, 4, 1) then
	if arg and arg[1] == "--test" then
		local test_file = tostring(os.getenv('HOME')) .. "/dotfiles/bin/test/warhammer_quote_test"
		return os.execute(tostring(test_file) .. " >/dev/null")
	else
		return warhammer_quote()
	end
end
